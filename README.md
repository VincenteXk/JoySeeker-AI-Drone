# JoySeeker-AI-Drone

[English](./README_EN.md) | 中文

一个基于AI的智能无人机系统，通过轻量级视觉模型追踪微笑并使用离线语音控制，实现自动捕捉快乐时刻的功能。

## 项目概述

JoySeeker-AI-Drone是一个结合了计算机视觉、语音识别和无人机控制技术的创新项目。该系统能够自动识别人脸表情，当检测到稳定微笑时自动调整无人机位置进行拍摄，同时支持中文语音指令控制，为用户提供便捷的智能拍摄体验。

## 主要功能

- **智能微笑追踪**：使用MobileNetV3模型实时检测人脸表情，识别微笑状态
- **自动定位拍摄**：当检测到稳定微笑时，无人机自动调整位置并拍摄
- **中文语音控制**：支持离线中文语音指令控制无人机飞行
- **实时状态监控**：提供无人机状态实时显示界面
- **双重控制模式**：支持语音控制和键盘控制两种操作方式

## 技术架构

### 核心模块

1. **主控制模块** (`main.py`)
   - 协调各模块工作
   - 处理用户输入和系统状态切换

2. **语音识别模块** (`asr_module.py`)
   - 基于Vosk的离线中文语音识别
   - 支持特定指令集识别

3. **无人机控制模块** (`tello_controller.py`)
   - 基于DJI Tello SDK的无人机控制
   - 实现飞行控制和状态获取

4. **视觉处理模块** (`frame_parser.py`)
   - 基于MobileNetV3的表情识别
   - 实现微笑检测和目标定位

5. **用户界面模块** (`UI.py`)
   - 实时显示无人机状态和视频流
   - 提供截图功能

### 技术特点

- **时间防抖算法**：确保只有连续微笑才触发拍摄，避免误触发
- **空间防抖算法**：平滑处理目标位置变化，避免无人机剧烈晃动
- **轻量级模型**：使用MobileNetV3实现实时表情识别
- **离线语音识别**：无需网络连接即可实现语音控制

## 安装与使用

### 环境要求

- Python 3.8+
- DJI Tello无人机
- 支持CUDA的GPU（可选，用于加速模型推理）

### 安装步骤

1. 克隆项目仓库
```bash
git clone [项目地址]
cd JoySeeker-AI-Drone
```

2. 安装依赖
```bash
pip install -r requirements.txt
```

3. 确保资源文件完整
   - `resource/best_emotion_model.pth`：训练好的表情识别模型
   - `resource/vosk-model-small-cn-0.22`：中文语音识别模型

### 使用方法

1. 启动程序
```bash
python main.py
```

2. 控制方式
   - **键盘控制**：
     - Q：退出程序
     - Y：切换语音控制开关
     - U：切换自动追踪开关
     - W/A/S/D：前/左/后/右移动
     - R/F：上/下移动
     - J：悬停
     - K：起飞
     - L：降落

   - **语音控制**（需先按Y开启）：
     - "上"、"下"、"左"、"右"、"前"、"后"：控制无人机移动
     - "起飞"、"降落"、"悬停"：控制无人机状态

## 项目结构

```
JoySeeker-AI-Drone/
├── main.py                 # 主程序入口
├── asr_module.py           # 语音识别模块
├── tello_controller.py     # 无人机控制模块
├── frame_parser.py         # 视觉处理模块
├── UI.py                   # 用户界面模块
├── requirements.txt        # 项目依赖
├── resource/               # 资源文件夹
│   ├── best_emotion_model.pth  # 表情识别模型
│   └── vosk-model-small-cn-0.22 # 中文语音识别模型
└── training/               # 训练相关文件
```

## 技术细节

### 表情识别模型

使用基于MobileNetV3架构的深度学习模型，在FER2013数据集上进行训练，能够识别7种基本情绪（愤怒、厌恶、恐惧、快乐、悲伤、惊讶、中性），特别针对微笑检测进行了优化。

### 语音识别系统

采用Vosk轻量级中文语音识别模型，支持离线运行，识别特定指令集，包括方向控制指令和状态控制指令。

### 无人机控制算法

实现了平滑控制算法，结合时间防抖和空间防抖技术，确保无人机稳定飞行和精准定位。

## 开发团队

本项目由深度学习与人工智能课程小组7开发。

## 许可证

本项目采用开源许可证，详见LICENSE文件。
